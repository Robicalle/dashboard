<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"ecd3be03e6ff324de28e7cbae221d986fc4c93c3fae63009f7f46a185f76dd83a2a845e5ffd01f62258f8d8dcd5dae252575b385a3aca8641d5670d398986121eb5c1752565a888d6ae9e9cca40be3d6f67b3a4a7dce431c0a10281b2ff94f45964ce28736b80b7e6a938dde61f356fe3c2c61330c9f7ece6812b5aec89744383d2a23130590d2665312ca80ae01c8d539b52ecf10739dad1b7aa6b3d9f8c9fe86680498f09a922613da8d0ad62608af853e7aa3677e1202dfce3d25b485145c9e558a8678106b6fcecbe90681651e8441411e5cd962dca70b263847d63d5961bfee942c0c0775873da1238741cd30a3f2afba9e7b2b5bb4371ac8501f62ba33a9f92a8004126e9d7446a8ee8df28405e9e01755fb577762e5ef5457c18e76eff7fbd9ea7e2194e3f1a4231f001cfdb5a678a6899ede01247d7b9efe534c8920611ee6a215a0f31172451cd4f6da8f0a42653c923245749a676aa3a08503621e141fbfb78964bdbc46adf78bb0c5a9921de759a9c64e35414eb47357199dd82f12a4c9324a5a588c4b035875669cf131a4b25588de9c1bd64a4b03e850224cf8f5d2f6e7e216ba7824ec40b04dbc3bcc927d9576026753decf5bd47318250eb67a28da05767d212fc2bc36d0a3bc5674895cd7d792ce05859ec6de898680e340668ddbece5768d417a6d32e02dd635b681f8aea7286836576add76181ba429f612b62910409456753d6a73c0fd0a7af9ab56a62fad09b016b2e969104f2a66dc4f38b5ce4101c51e07d09c6fdc6535e3f7c0def2e6be687ef0a5d19ddd51210d9e73e73d7bc60338bdc4f94ed4fac61c8ef6a48a70da24cea1f7b2c262de275d1a8658c8fa325b2f163780cd67dcdc3a626f9a81a253b4f1a660df684bf17cd6cacdfbfdd98ba95cd2f1a5b7594e6c5200fa759037e67273580cace265e6b74314f9979437367fb417c44d3341010ca0d1d1bff03ac8f177ac21d2a77923eade4ef7e51050d6900ab0ce7e1cd0d5b9b2b02b55e6caf22f9ffa677e6d1f6ae059c5d286b42b522a82e9d584788d6154bc808b20288018becee35db4f6c26ccb337db1c7daa718996a6bbbf8af5522284460a285ace289bb92676a39e50ce557195e7925d67e54df1a6a2eb910c1801c090c0f65cc7410d825c6eb2a681273e2f3f072400b8b3f3c7029b84c47bf7ce10ed05bd99de9f7b3963aa18a270c1ef9044aa17cb8ccd0032f3c6c09b8b66c5afc1fb28488a69bccc54612502a3f7e5cd753ea8d0cf2b7c9b443a6012710acbcbc6091b04e903b2ee5c5e679477854619acc86111a461de6a446413216653452f9b7f512ecf7340a444175caac474a40466ad8128fdd6a30d77c146a92c3e9f30c31d7cc9bc0af8bbf775e498a43e403635a13db96cc40d35b1a25b0aa97e3b9e5bff2ea10691e37412d440e7651995bf894b222a3e2a51724998c8713643fc7260af5420f64f12fe1ac6fddd3503df10444986e21eb7ecfef978f0e6d2fce7f9b853fbfc1daf7ff2c26ab20c0746b8044d9b2d9b8a2c0de72fc78482ca20e692911f6405eabdbbb183c1e899991997e9030f691c2acff3b517827704ddca62ebe7075002c622b2262ebaa0359049e59646effa97310b1a3f3c2191a9e5db1ca5d779ecdf699f53601992970bd7737c84cce6a762442a44b7115de3a6c6600a0ab3da20dc9b13a53f12e443f27d8db979dbcd553520e7eeffe0e4841e03b1ccb140826151c7366d41694fe1889dcdabaf012aa20ae3938b3e62a59b048428e3db648a76dee9263d1cef839319dc7d01499893daed78573a260036b99be6fbca7582ba6d92d16a0764853e00c05811561b72f4d0a018480c13a9e1b09f1834300a3eb508e4baaef0195425d952d8f41475621a0e52118d2c13dcc26ce6e14edf65fec5561f0b7a7d6fa221c6a12ca1ad91c63bd8b059b64cf4c007cde6376fc197cec99f70b27dc0983ad829f62b03d4ffc899587588309a1cc8f3ed29ba975d4d20cd591922b6132b6d00575670232590bda488890734ca4ed36d01c605bd62271e3b1376d3a470cade3f0246b925ecfc9fd0f0a02942962dfdc7cefcbcf49f546619a8d869dae2f90498cb0cd553ae0aa2184024216a4e52047fc1f22364fcfb137a147e322d3a9a9d7a31bdcfe6d95fad5e0caf396841fa9527ea3d394c4aeaf1a28adfb8beedd2331b33930489848215943db6e1c575eceafe6ba84fcc767e2fe5806185048b4c8d58f57b72dc7148fb93860d7cb515dc120cadccce00003bb3a49822e934b58867005f6fa954eeb6987ffebba9f9732ff0c03b25acb17148e91030c20f1953476a0fb66ac6753c5566ad2c2c0cd03173efb018ba62c0e9e791f19cfd99f981f6cd3f2fbe06e161e53318029e9919dcea98e7e400e0d8c1b02e885ae099aeb8043ad4215d51ec1cd3b8fcb9ebd0630d1deae89048ca14c272a9f5a3314406543cac2cd22157c6c8836400b595e66521c617ba40c6cd3f3d34c8984a03b54a9f6372e32f147aefbbed7d47985a15658ce5efb8e85a248f2af6cf45aca84d14c463085ec9235247c29e0b253378a6a081a8fdd4a9245fb8e0feb90de86321ede49457327fbadac82af27e478f307c89d5ad472850a219b8995d52e179db329e54986b8c6b4c501792dfb106165a54b1ce53e295c9e249d8eb0503aea82ab59a4966d9400e8e4b670ee4839e33389c09430670b5b58ce45106b8e803d0347ab386ecef08a737817b63417de2e79edc19969d1237f0fdedc54ab74050b3757ca9ef10f5ae3e7f947200d798888e45b0273f47d6089541bb57eb284e1b6a579438b0b568748dcb51ed325565b2befc2bd71cdcf10fc927639c00a961598876d524fa3563137eeb6bd7907a9f2b20f3057e173b46d4596963db1d2cf88800ab0b7fcc19466a3de51cafea9c528cbe98675eccd1dee225f3f25fe1952654d4775fe94f2e5abdfc4dc9188d173fdb9877c5d23edc43a2a4be59ce0cb14d75693253d031027aa34e1f2420972841c40f8af78e137a25dae697e451613e626c61212e383226102ad01af6cbad5f01274aaffa30d1e12a31a52875db854ce2482b6a1c185e93ff7372b7ca083d7273a8533cda6037db037ed8b59c395d224979167d6da13d6cb4f04ae2baff53e9a9ab641ee4d9aace58bafff976f2ffc1e3059149f89460ef02ae30e44b06a861d403ef461917ac33e3c6b45679b985066722f90c2f4a492b551af9c4b592faf8be35ea584ccffc677cd97df89874a4d65061ec4268e1898f5e5c88cde55b87ceb5717724f4005d0b2e70239a36a98a734963edc4dc82f9082c4dabe0128538aa5cb1efda73a0b7b02f4df0a8e9e5b5374d61e78701363c16e0e895f79e9cb6faa3bc86cd0e01e9198e94cbb845ee8fae986508b7426a68abf4d4b4162c3e5210a228281ec32f90eed498428af0501ecf418f1b986344cb061aa8c588feee407994781caa4404f66c26c20ea74bdbc5c42e607067e66f7c688e23e0b308954dfb036a116b1fc4dceb4cf498bcc36f6ae612de7306f5b1bbde6e747bf9c529bb46667414321c113fa19242ac1ff6cb568d84e60b34cafac56a82f308a80d3c4c3c9550f73bb1d4f5b1be7f5b8609998e74dafdde50888f85c8f81a2c7a8ad78becbf115b35b5a9905a73d48593bfa4a0bfde07262c9002a0019e19109901dd129680a05e15fdd5b863650135c93e2e6daa05077fa52292ccad4c49503919431de481f86ae647d96c761eae13563e9a05b7633927f3592685c8cee2ab87f9db212630bfecc9cdcf0368988055a8ea8924ac97d9942f81fc56242a778e1ac5cf2069c6756db3feb2e67cf37551bc8c660cc1e632c47da6cd32e855aff0521e25e345a6ad6d89e5a69491c70623786b9bc8c489a9a342ed5525bae2ac4ff7b51209a518cf8f4ec5448f94dff4d3ada1043a0b931bcba41517047c85e46f33c6168469151cb4a1745354b27dd5e9d079ae16c4a027ebd2471195a90b7a1f3146c57454886bd8ac7853e23fa5f51a842d4466eac0707deb3da830f11c685db13f7507dd5e6cd1773b62594b341996ea1ffefd2756a9ab061d1a7134914a70c1d9e41e7e1f83784ee44541cf401977af32fa85883deb4a3112226541d71d76010ad58eb8b05d69175233d021e5813db148adb65c46101043062937a0555d2bcd96d1fa8957dbcff4dc03127f784f5335842df880b47ae3b2a98195556e693611e7205a8b8c1fda1214a7a9f6b169f84374aa3576607007b498ebbfbcf018cb070e976475d9c58f5990ac14031f8ee90dc3e45c1865ea001724af6cb98190579ae238e2c94c3d44eb2145c56d15956911c06218ef3f859edc746a3061696606c885494da80335a592d4d9fcf72973fec8746e0221508de0965c6c190fd5ffb90d5bca2ff2eeded6e4b88796fbbda04e208884fa307d184302cf151c5f40beaeb44d7906b951ad64e1d2461d9df58984f9b6a9b4a48dc64e9e661413a884f2337da0d48a2ea043819b9e07a73eea511b54fcb5013bf17f4bb47ec9975df07070d694bb93c1fa95342ff919408d182f655e1029365b0d2352712af506a0d6fa5d8ef2976f93089983819bb81a39e52474052b028a8b036847a659590042ad718ad86b2e5c7476124f8fe2cf467c4e5a275a8a0273effc8ce20389b8364589eba545b1771624e4c205ba98c09ce8487c7efcb6e3ec344a032f4d99ec1ab345a3563cbcb75b65afb107483f1b99c650b91e3ca6167a497c1395d14cfb321969f4cad26ba55e44e818ab074277412e2d6e4de53dd42657770e52a45b09458ba0eacc7e2fa9f5afe51a2f153405d28784d4f964dd820268e5c814fe8cf211d2f06a93cc4f0e0139a47122f9768e14683ceca515168dc441725de2640411a416fd57803c5d305194caca62dc0337dcd98308f6de31d7cdb56034e34c7faf6e4a6cd56e7e2edb7a5f3670ab2290bc4254e644a2540b8179783393d96174db6137003911249f42b239771ee1265ed306c07d93cc7354f346b8eed261b0715b48f350f6a2812635d8905551ace61987c035a5796e333f4189aa32d5b42df89741fb3b38099f9c34e815d64e6c4f7e5616eb26297d3b228df0f8cce85fcd1315a74c01b8637352790528bb6dfb9b07b96ea8538d5f20df24106494f0039cc87a2a608a6ae8b8c6779a8cbb0e55f9e017103b9bbba04614e95222a8692e5edbf361164d051a78beab0fc4a4bc6e1495ae96a7ea7c1a0b393ca61e14c7ae5b82ec60acb0184ea690853101493d2099149eb98a0812b941ff3063e8aff95b39ece3db7ff79c8125cb87f6dc77d1d3473fd3f6c736cfde5504d12d8138e19bc99d9e73a43b75eaec10b5e4d3affb5272d093abfa180781a88abf3002ec11181f72053ef6772e8f024bc23d571f8e1f4b3a715e1161ba9dd9bf700b223568ca503bd077355b4e80ce814d24cc94721e416f18db29ab7db4d294c18d6b36875926b9f9cfdee5774c8eb91fd5b5b3d16ce0b9f5694fa97932840974439145a003115e7816c0ed5eab0e0f68639da9f898fe6d56214c93390a0133f025638cfadcd57a297ac2f41e79b3e05a80753637a7ee4a12ad937f30ec79c0163d568444d7bb84c62c6a8152d3517e983f4913566d352a5c1d6aae791b20a35b5cb6e1a52c0c3bb9a5e779506694368c2e4b445cc7bb330469e75f4bd406f58c947e40dff843e5bbae26906c05250a2f604070325d31dfe0febac7ebb19090d3e612ac769ac02921d5ed7ce96a1ed39d5eedac8a04f0595cd8d4ba757963a71c19b25761b548b3e8f9ef9c7ace8f760ab80ec8f512855ba215bad100e59e316fef38dd491a238f5a2a5b937b56cd63c37871c401c7aa66d2d407bfbe20bb480d83bb617cd5c741443fb8b3dd736617cac4a03235cb1bb62b53285efaae503c1bfc27cc55d095e30efd1c91ce9f128ad93b5b07e7f11dd277dc23db95e8a496ad94995bceb053517ace1c54ae847b22c95cd71c04baa9884b07917a07ba67c0078e422469c656d20291e0cd4484b17493b19cd3e295a24d14cb6a419024b6baa6e89ed1fda91fdf42cac6ac1d8597095ff3732b3b665dbe10dfff138c79c734ec461b0640abd454f9fbc8ec9cda35fd6bcbae0507e3b72ed022d3e5d9ac73db4dd3ce53b56e4ef11c9737a4d113994bc8a337ae7f21e5e06e5aa4fada1746bdc6484b3198fb10199cd7325eff73f7e0dade868bdfebcb6d949f710c029918ee8902a10bd122401e0d02c503b1c15e4909e6a6f928cbb03716e9d5b8dc559305c57d1a80203fc82524d85a2bcc07977deb05df42f117631589b9412b80e6c1b6b2b0de8f89ec380e5679503d4c607c2089b6748a19d5f3627441c274bce3e041163622ee1bbfac2d41f023230f912a39707661200c80bfbb6af3a8bc035d29d6fe12f9bd0334e6b04ca120ae25400117b039b8198ee8fefaf88d9ece4641a50cab514a20c501e267fdc57c04368249611d2189bf05cf52cbe8c5edaeb8cf2d73819a7a39243a1cdb2e66af91b5b78deec4f09a52db262d3972abd137004642d5c971e8402ae8735f425a2f539eb440df6c4864f5c13b6073f10b7b66763810cc443d851c4e74b19ab435c3888740ba69120b3075cdc41ab508c8fc75a698fa1c7a6e1805ca70e2cb5f9e62fc52d5e0f59490fdae9ee9625bbc03d4a693d0bfa2f633993021f92b6fc0ccc0e5ad6fcb643c3fdf9dd31329457727899f92db286a99d4fd45df0e7c5fbd77d9ed5083982e310236284c16a8199b5841f99125a27698082271d71784611348abd975f2608cf26d1d1d32383a5490dce1a270868814b8eda956367254c602eb08c15fe0f5de495ae48c57284f98dbb9cb093432f2ec8fc40a845054569a6f721d2d6f9af184b42e8d138933b3608c4d805b0a65c9b2f673d66f09f174b69cadfccea9621b7db13ee15a2b9fb24d1bd4745eed6f0fe3ac54b1cdb31a54e7dc5571fb2b9f73c366b66435ba5672bb9319b4e1ec0b6390b1f35175466f777446e2c2ce3106231139467915e941d65533dba58af8061b8b88d87b2ae9fb30cb252065ee4b7f27c97b2aece5c335afb15357d0579e110533dc9abc9e543365cf4eb9974a5078db367b4cf31537fc93ac513e08ff6ef07763bde2ed6a2dbc83c2b8de5b79c6de358ca3c175006aa21c715d28648c8fe746795ab76ea9979c5c0b7a617208794729c53236cc75c43002893b644a09f89b68210afcad7fceeeda7163c9f92083e0f417ee65493dee05fa759f81234cec291d70d3a794537a91a47f78bb08183456689e417ba16d26597ef03dfc852ff6b6ea125a57851f31a0e58d865ebf8691beee563049f52c42d01326c52413e7a8b1f430bef921687890485401c79ef0922654b0a130878825dd07c4a6a25c980a70c65d10111aede4b1eba41c78399edc121dfc609e01128f6260a40daff4a5104e2a332e426e5daaeee6846565ce3e9b1ac71c7a45a339f2622cc4803998732f2107e10ca57afaa7c9b027ff632a74655195c2ea94945670dc59cf1566923390aa1bbed5b14adf4666d95682cf0d013436c985f175b0516c23bc4857a1de166489c6979d5a6f92e1dae1e837a9cef0bb5c49295af6fae8c6a49fd8a6ebeeea46077aeae3ecd7c25d907a6203c15faa07d4787b597d58edca9b4690678e447dc4007c1758c62f7fc9e9bd07494b63d8b06230f4b54a638a0d5a8287a1285d850ed74efcfcc2f378056ed99107ac0dc7ca3b17c855c64d496c374c14d70fe7626bcf5d355ecb312aeb5bb5a3c7206697f17eddadc6c0a9531c8bfa9b639ff4aef97ebc9ea901f092850d8cd52fafcd758289723f550eb438f20a0fb648bfb87d8b52ddc429076c41f042eb150d0c436269f3a109302914e5335fc6a4616d25f101549f7c5cd6d5f216271cb5b9042441430a3e7a3b8d473f8e86a7d2dafc068496a97a6406c1362d16a10d99c53ec8f257e48949be1e97c877f4832ddd0f0f7f18505238f68a8d279724ecd08d4464f0d88cd3221e0ad4f45867f82a44e507c82fac74fbf4c1a9b294c997ec6cea31870c1f4203d6b6a79c8d9b93243639b5f7f5df3eb05b9c331b6df9ee4eb599e19d82b085e77b4e1a9103d12ddc93f0bcfce5142c97f0710f28b6379096881bbb87462f1ade1f6897345f788e1ae82161ac298e0888cf3a3a0c62ce421ec14a5f470071a83878623c98cb6ecbbc3aea8520c2927ebce39e4b91867a7b4cf4f972baf7b9e2e84793d76ebcb6343ba080482b4dc1bb95bf54a9c4fa6abe37319b3a3f77e685ce0beb380e5de13fca58703e3713811914882a718ab007f9deee50b970d479e3bf928f5e80e62f88f2b2d9c224bf5a5e05a1473efadd4375947e6909e60aa14d661bf9d505bfb89f49562df45c24ee13ba3c6e93b3e13eba8a58a0ef021121d898536cf1d20d324c3644a735fe3e10bd9a77530eb742dc7393c6cdcd34439d311e600c4117a843abebe9e777026f0332fc0889a140eca4630259a39ff5d717e68ce1636431e1ebd042988ca6b1e7b0fe752224405da422f57b2a17ff1499502a08e891927f805194a20100dc44d3f9f11c1c525547dbf686cb949564d261d4169aa7ee038f03ebbc8685ce049c336e6da02110e065e52a47310b09f1dd08fad04540848b56c2a616779feaee2f6f3131cd2ce7dc1d18e8695c85d7f5e023dad8000a80366da1a241dc430c40f4bf968acd7ae8951fbf1a9991283cdb1bf93da4bda1a52df43a75945107263345940bdcc30d30c71a7c56c2fa3f77ab009315d0ba04bc8abfb4ed9547e83651af1d4024c5617b71c79b4d974f4fb185bc29a19e24d07869e25ec0e3c4af7decfbfba61e6ba99be7b32c50148b052492170b6dee946792b6eede95293567d099a75e46ff0a07887b01f283b0c0b52d905c1d6ede2f5e3be3e8a114e4fd14d3ee6ba91423cf3d9d3d58c3446cdd1fd0b9518bc8f0f997b9b7730cf69e94f9d76b96b5d64f556a8541aaeae034b9975af27563478ce78d5274bae58ce71f64fc03ace543557a90c48b917f1ecb3944b948023f503213df0a6cc21ffaa36d9128dcd7fe27002f3d3fb60447441d115dafc8ccceb07377852b3f9abe8ddb4dfa2d5ff04543da4ba0b39cd744369e0932f75ebd0c110940574e6ca1b06e5627ea95643ebe455a74ab648d463aeca2cb26fe1f62e555097d42d616ef4df5acca4bad0f4af45df2a8917a9ae15a768c62c372b6a632098f00402469084e9c9aba35e1a93cde3233fe6ea06e159fc9f8b2ff7303ffb1f52928f2f5c7dd4c4668048a9978b21d07c0793184dc12928a02580efa64107fda86a13bbaee9a8d6369fbe6f15bcb3e35febfc6e95f7021b6c3b2605e0ff7aeff388f1702aec737b9766d98eba9cf3f3a8af55f14ecb7dca4cfe6e3aeb86a0aa0ebe055a9a58a4595ac1ddb7c9d497e3e820e24f8b566b30883fc3f9639078f2ee427240bd669b90780c77b3f5d35f7cdbe1d7dc994cc2e7906bcc39c0fca28222fe8dd8d679884693f785bfe081eaed4f35f66c66a52db13bf1233907cbd082bf5557206efd9d9df5bbacd0a0ae3d71550efa57a579569e27b0248e75ac9ec8861a4570438887dca4fe1b8c594c24f4f220cf7e157cf00f67ab37fe7744180d0fc45e20128777620141d520482cd2ce3c113f5bcf31d784851edcb84df5fb471b3289892bc9647f25bbb483db3e7aad6d7643ec8ccdce9417cd66685a8da64825af6a95ed3cd425cec4ec4597761cda9467bdfaee5eda08ef7248a086163b9d03e777c96451e45a71c2ad78478dbbe76b2b5b69e62e9b77ebb23e78c6e67a3dac4c3c8df52ac0a009bc261321914e086ee35257009bb80171010df41b3f99030c6fbccf4bc2dcf07732b3f2b75e8f319b47ebb491133d2f37f37f1e80a7c7870cfed3403eb80024de496f263ba6bb5d8f0992387c08d3e03e7cdbc734cf42a61fdccd985ae4b1f2ca9538f53b7ee5f47e4969e526908fb964735183599f399aeec50f5511e024d1a36b7c3e885e8524ad86d1efecb8274c772888862f55532e080370f84a0ab51fd3ea142797d3c54cc56ef6805ddb2cae540abbba50977bcbdc6c8ccbded055e1b4ef323b0771bb163a656cdc2ea127458502e4c7ad67cb4ecc90381c6a0ac86c04e6e6c9ef7c9d4fc003b62f9aa8dd432e65e48a411fe0c938006ea2de44e31ecbc0c0c79ba178acdf92324683708b8f8ebdb0936b140cde3d6c8b8acfd9cc45fc375bab80c0ad3a27e066c5f5129296cc5d6f5d62eb60fd669227d600ac1415e5bea227ef13db5f802d945ae14f26233cd7dc3df21bebc6eabb7331c7a9b754840639b5b23ac8301fa2fd395b894b484a957fbd332167afc49d5cb156f8d881139d0dbe1c846a4a9cf0bae883114f232c7652adb2bbc8efbdebe61ae8dba12cfc0acd8b3dca3ea743923653ec321b10bcabb1106fb135bcd011a70f8674275b1a7d98a62e07af288e4a30fa29e8dbda8511bf4850f46af6c343b7e77945aacc50d9157daf2a2a5959f7422908091ca04d54d55bb93a28b2d2c04c0a5ec741fd934a596c354d42904eeb17ca7257ece738c0838482c780c3506b8ccce80bafeadd911cb37b00bcf21c30dedae91a98c0ca4949b48bc8a19704c325ecbde4273e19c5d02e157f0be31554ba836ea40b08a68d5b816cb40fbf90fb79d8547ff962f34c415a6b4dc91f476d2903e3a09cfd88a41e7ff74cde3ec37906ede16d59a449addd52abc8cd6d476377948795bce7bac78eb2ad570c242f06380723233b4297a24866dead39c28ad9e73b5861012b415a764cad088f63d5cad805489ba814b55a4d9fc645d75ec974902378111273981d2ad054343efca8e6982773375fe2babba4e96c84c9f7121de4dfbed56c9cadece6961db37e5c715ebc8887e02d19e42eb4a9ff76f022eb55103a62d47c3f411bbbc9bedb5e5fe91a68ba8770f748119556db2ddd3dd96c2b89dc208a07a617fb142bb6177867f9e1231ebfa1cc4e94f62d68d16d3b46eed2fe9b6e389b0181008bf25180bf753235ec581bf5eda62dbb1c63c6d739008e9b1036e92074c7db9f2d803d3de5b845c12274dfeb5897bedaedcf9edd85da447211c88641e46ec6fbc0305b8acf0d89d7161f7c43212af35bdd960392e80549bf19360dc88ef0b195bf1b97c91af6dfbcd5f2539af04ded3d37ef262213436cb77bcf3aaa2e1f8260fe2323502e3a487a853efa744e9495f5ec865cb36787ed6092851cbc01140fc5c285afd0f35f8824f473618d23eafcb047b0ccd2ccfeb3bd7f5510edfccda33913c76aadd390f4ba747d69c04b501f014833ea65d81470f3f3a9de0ea826862fd3e0c8b14cc708945c0cd0b5c7490f9c9bab3b834f3f51bcd27d64db294946971c9d8ddc16959f89bef3da07290f387a17c5298131c7c840347e0d8913354680efcbdc520cdacc6e7cb6e021675e1c05c268ec3a844b2069c657f1f2c336e5e20a870ca4d6826284e48ecf6d8768cd67efc18f65366c9f95eed9b033b268e195c2d8b2b419204789867a3b70c3351d0bd33f019cdb47c182776a59e870f1ed7b6f1858ec8fe4475eadc05c62359cd39b03dbd11c9d7c3d026adda4df71332f1531009a61ddad8b0f9759ffcb72811c06679e8cc87464c380b811d979cc101bc422d7b72125770d2e3f1c4b4390ab75dd88d948926d8739c88b29675f7f4f7c1a2a4407189446ef813f5f504fbf867e389887c7a77b9a4ef6d92b278a793f8e8a7b5e3f369f63f4896fe468bebdb22bb06f60e261d66f5f3caf82586436a2209acd8d39ee88e808cbfcbc22a634d9d9f5e4232483944093c9092f4e035e2b0061d314a6d63442b2a4410ba51f6460c18606fdf335d1a800021c7ce6934e8e5c9d46397f26ae6f382e4371da35d318db5b6e29f17973110608a67953ada976c8ec38dabd5d22129da4a6e5fd5c6c57479fa5b56120d3178caaea9f12eb8a493f0387f01edbfc0c018f79cc642e9472ab32b734c5c1c7db24173dad9f36646b95fc1273b978840b852c61f9ffc93eec7dca3ee783b11f3106549feedcc3b4d478032f75b870d42260239576904836892a93c7bb551c997906651a1d63814ddc576501d7eb4679352f3f948845468dc61c6934982a27c19380821e4d496fc902c095fd72e38b7730d62191aa5a3cd451879fea06a3b191e6d64474b3f19a84fc5833a35640364c63e1ce74f6b051659ba4b4db5afd1c275f2d236e732923e51da167a1f004eb4706152fa0516016eca4c62fd87d305c48c76f0a37018c574e98f531ea95a6ac0beea8d1f63a4e3d824cfff8be35dfd6e2816a97c7e60d8a9adf70060006e4d8a9ef0cabcaf01826d63713fab5419bce54dc5f7a6c7ce0484a6fbe23557cce12adff0c1ecc625d5a9957ab5f78f4c052e8b63759e5c5af398c9e1b01f0d36b8a032595a6c475786b03ad3f709353172e5ca997852aebd349947a404190f9c7ed6637ae2828b2165b2a7cdd4e7c7f827a9711208ef875fffb8979b60e0a4d35157ae290f2e0deb7af373331abae86ccc541acd7caf1e6ea006e147d54b644592ed144922b93e0bb658d1f165dfd5933798566210a0ff94be470d414852c7306571feff27eb9891d94669f7a2a2164b4bb82a94baf130c4b0077968dd14234175e42cb7772a47b4202a88229c261a441405f85ea1aed2f3cdf86dea17d3586cd9247c09c42f4bb712ed05722fe6dd0668931aa86015d43ae2f43b4dbb6b385f45d1d5535eca9aaec63e3b1c1e22b1f69ff3768e1d1bf127efe3894c910278d9d8ddf8ddc8ab905e7cee8a259d0e77a9696905ba23f55b0fcd115c54ea8109f67b992d5d1d105e473d7a0845892bb3e62db5b35999a4befb9a003db1de71e248f6c41342a96f4937d7d8e0f02bd2748047833df5ca06f4e2ee629a89d061aefa89a3646442afbd26062eed861e97243eeed93fe5071708ed22ed7af902217d7f70f99b2fc18af8b73a8f15d7e7190160e10650bd78079f85e932d3666a7e349b9703af178742e0ad45de7f35a2661f2bcf2753a783f5dc365c667b96378263aa424b98cee3c2a4c13c406a7b3c4c24d90e57bc60d55f6b42b146acd40609a24dade705931e74c9d124c0e29e72ecef7182cfb897f3e4c2d4402e2a4e5583059831770f6f76afb1a4fcfba291eba09df9d46e40d29497f83aaccf4da1a2047a7c09da8f40171590fdfda645928aa96a013c323034ddb420fc894561d18a69149b02e7e909b22645ae469ad372a40e3a85de22fe692cfbb170504b68f3345c6bace3db767ff64c2159e3b63ee1dad1e92a642c29e39f37baa271ad31af0e1ab189591903ce8855dca29632ef168047a10a1c5b0ed33e14e0e039f8d1885b7a4d19ed15167024ef58c8f521a64900fe9871312d961d53fe766e160846386e8a0c808e7fdba48245a5fb876cd6ac879706fabb163d36c35fcd8512c8d07a5cfb196aeeec7ebaaf63e8b788c8bbbf5f37598b68abe602f02dc062aceee41d6cb77b1868b2c057aaaf2d7f5b2eaa043f0dd361c804bce0e09dd4c6af159643bc93d61c5905fc03d980044aa8e8dce96e871ebcbd1b62bf850e070f52f550355b1cc92fc886f19b4963975370168bbda87b6b0cb96e2b5d52b2e41a232d76be24673efe3cf84aa5d0764acd67e9638a29653d52130f5ffd2cc8f0647a53fecb76f3aedc17fa8d65826604ef058592bab4301712f1aa7445ac86f1f09e58e5b707151877d34a60fcf402d2a2deafae4454d4f491dae4cf623fe9fd56ba6a8f4e2e2bd7426199b885d71637677c5c39797778943ded883c48d27145489f4b31125aea91b81a983fb4df3e55bef496c59f1655e364b1342c8f08e0f19883e31403923fdd5b69c8d5300aaef4f258c7ec2fdbb394576a6553e1d5791b785b8e8c9402aaecc2ef3702d524220744f342d21fd516ba2b7e20c546278c1f01e02a565be0ff42c04b971ef2962fef75a37eb1b053a8f2eb66a6f6f69088cfb856952f7068d2c6d72dc10021a276f40d42e55d46497df8219bd04b202aa2131c0329a7e027e8cdb3c650e89f31e29406e11f98502d2171c54011d7b2df80e67831a119d1ecf27ef0136d10e6130e4d8ee03c182c412121dc0741a4df29107b4d489b730e80a44357b8fbf4ed38e5b1e03595f2a66f5b1271734498f8581fe5899f89cbebbd6108f7cff1f3c76f2a83e86903fe4f7faadb0fa12688fbfb6c92043970b21398f96c2aba4cd992d7feeaa02dd0e21b59db91038d0b3c73553abb85d9daeba4d6179ba464dbd625e435dade5e76e923bc9554cb53785eada0f8da12e8631e3dc4ecc62f5be422d31a62f21bb4e542db5953c35ed977b5d59bae7195a665d0e6d2a8ec2a33a5725e70657eb116ddf9448371ae6fbf3c408990489fffd77cabfbc6b49d5b6c2586b9a695470c97d40b63b74127507ad102c7c7cf000c3ecd26adf69fb330cba64fe13a23b2d0bedec68b27e8c546403fb6b6331143cba40f801e8f8b44feee113fd1e413e7a58c36a15fe87ec2d2284c0d3f12378d01de080f082c6a29191f214555b356f5481c3ec07e77dd75ccc6db0e66026cc1bb7a9a648147c8d11bf7c5ff5e10b8b9228cef72cca11dd8c14191e868d0ca202c2ea32ca595f031e15124e88dd036754524353e6b282e5427ddfddb0492c5d825b56df38209e5f1e59190fed975c231be59519fc73d262f390feb6b26ee4cc7e4085451e0b9c3b0f9e53a0736db79a55dbeb697faa8c1f26d75925509f1f56c3780ce1bd533b782fc0dc427c00fcdbbcfbc9b7fe3169f5f4af74b9a5de9fbd399a0ac8c35ec4614e5b966ca34b308ae13ec3bfca4aaaec37e211072bfce8483e3c525b6a4f3c867946b74e0d3800b53c3345f491a6867e309557ac2cb0c36f781a2b4d1d517fc327a26c398862fa7b0af35a0c01c7c88a5cb082acb1f35aa3acd7c7d902236a55b9a733fdf7cbb3a390d98cd67fbe13fb93190f14d38530a64336ebf3dc1bfc12c3c5cf5a35e8aaba3f4a31b07aa5b97a6f77828aeca7a942514a9946e1237512df67600bbf358b6e56ae98c8eef935cff1ae221a1ed51412f2028c6388b15296928326ad11d77a4af043f854ac5be5454fb37b4a0763d57aacb0ee2e6aee1a826b67e981d8f6591562a08a6a27eb8f77a9593aaab11dbd037ed5df1ae7f374a43828ff9f6ae5a0abd4cd223cf4df583e1d671a9152136f8ab4438b8653358b46f800a660ffd5efcd116cd646d688b6cc396765d1eb21cd36263b40206b99c7ce39274dc63ef33948b0b75b70460c4391543d9330eef88be434d228108d2a3692b988fa11df02683e6d95c1bef67e6c5022640d4bc46e0c8e5b5315a980bf520d2850951fd6cba07305df213f04fc7e5bb46aefd2203de74dac6271025647ba732c1a9a5443e69ad5016b68a5f09788962b3ada7c8573cb1a5acda9567b966392147a4b33205e4b99abd1dc1db0e91c79c3c3de6998356c418211d6abd913bc43334e7f4cc783af23cd4fa2ff4f92bcfa8e2b2b1eff0b3a477d67c66047daf57c0bf15282588654af864a9dd12f1d54c6f1e2cb0cf48cf89a9884d1ad9c8330c59faddcf905a0ca8a24c034240e255138740754f693b45160eafe4f333ff8b292ca3e56175660aac0bbcea5af88b78752c8f1e40a4c52084c1af724fe48f231fdc79bfc23fa142db6333cfb7066f05d9faa5ddfd7709b1ea3d1cc9f70cb34bd2e91928ebeed759d7cf6db977f9dd3c89cd2cc82b80a1d6d6f984f11e7d6fa3a8b2a1f6f60ec08cd492424d29a038a7cb05fc45969df96d1ee2d45ec828ff02318ac89878891ad37127c305eca33e955ee9316ff460b3e40281bada4e04f3812854cb201c6dd3fa71f94a1bc1ae96aa14d0c24bbde9b783c6c1cca642c6934776288a604296bb5f4e768d6f748ca0548a66801cfc3e03cc62c23e30b3e7df8f4f130d0c859bcc43012a8b818090227fda1c3e3fa4caba54caf28c781cbc11d35f50ef7f8d4457f93e6a32de147a6ca6c416144529905d9759c88f221354a0f1e42708c510d447f0a5a53d30382e4f87b16b91de0460e993a44ac4f11e4797af87f70f98601ca53472ceece165e04709f778754d06f115749caf2d11cad22770426c3ec463653e415e052bed066382fbadddd9353df2ad0efa044b2a66bd2f433ca79e7cba0ce1b893ba1fef97912b940fe94598b413eed938790457836998b66f6c5799dfbca5d7043e9f53cf33e35b42acb635fd6533273fd381609d69faf621047d926863a46bdd566b63398ec4ff4c007d1d393eacffec6b1982faf117f59a6533107d93b4d6f6ae2906c77a06822b14c43cd0139b981a932e21b373c1309daee0c40129ac325b891004ecca9c85c3e2d0826918f887b72bdd7dd54e8c1f7605c452d73299da153af616c6eb4fd4bc83ec937098b1636536c5b3e864d82955479a7d9edec12bcf7b86a54f902f92964c7c05e01fbde0f46c1a8b135686a398a5e8d779ed840d84518cb0320d1cb3582375a65ce22d3ccf73389aeef686b5e141fe9a62306de247a2a04d13e447301e2f9fa8cc8c5a9b9059474c30c7903820ab4397446db0c4ce40a40f47fe667a4f4e9e9c3927e186c46a31e0ad9d69983da47613c888f57f2b2a3663d2c010f62a479568e8d1e61612d011eec13e2f03f38343b644736fc604ef53486f9db199bce76b4eda90085aea3acfd024d81e2b216c1ace6a635902eb82e4205b2b979b28cbad774ece53a007c43516d9b88f89558d7214f99716f9596a204179578ab2da4545dba0813490ac79ee48a38a509324b6028f883be896755b99793628446b3ed4e75874d797952f3ffec4ce6f9dbf1e90dd1a5477518a9b2c1e368822e696c36f765ece4d589097c3281b9f7851f12c80c4cde991df0d466074c0f5b2da672baafaca37d323c851d5994a840c531baa0457f3bddb9e6854e7fd34679af543f204497f84e4a4520775ac06ce9cb25f93bec8eaee0ceb20bbc976376536f46a9dfce3dc10df926dc119731ead473e2459125f761470dcb16c77f52eddb066943f83184900f4752233a32eb8f977cab48e294b6c73c788bae9dbe4fa5d58a838181119cbbf9dd444d94667e2e754d520b3ed05f9210546b03cd2c618fd5408c86fa94fb176b9c197bf8753a0f3f5ac6ce8991633252686c810713213d6aaf6d5e23ae4e97d4de654a5cf74d33f65bb19de623fd98ae0ec5ba593bdc83e1b3c0697b2f642771f1da7e3e1261937cbae4b85ed71ae2e842af9b3781afd536c97c6d0f410b32477d600ab94f05d8cafc4c7a49afd2eb5c38084166acb9554c4b99ae059cca000e48673840e875f78f268dc987234c8402db427bf583faaada0061602e1f4b971fcc8929ff93de1e9a66efed1034e32d355de5988f93d1983809aa614943be3e6442da678fd6a9e62938fa34a425b7ea5b658a423e108e08bca8f40a71cac553e689144501668ef38849862cb6cb973a8b391f75f11f858ed3e365b4436474615815eb040116e42419fd40eb84dd829cec2a33c97a84c876b99cac9af86eec9cbec30366befa818081d889496f9e124450d59dbabddd36c37f8fb072d46bf81d0d04341f73b06c89817603e5d50eba784b80dd3d0cd5d27b1372b2dbbd6449229f68655fd8d3515ae974fe489734ddf5238df031f6248f405bdbf11b3c2e03df0e7f11653b1b8520523c42544764b963ee86da5f4545fac6c5fde2918d240e44b439782374db210028b0da50109b2332ad92a60fd0fceb70496e95c3949b48b99631b69ff87c5e0b26e4acf6a26d51e495a8f27f8cc3b1967d7c11d5760e0398fbeddd6b8e141dc4b86dd94b3b249bc32b50a6228b671ccb3918ab778722b75c370a73c1bc484c003684c5f6fd19a634bacc44e6104eb27a22cecd523f8e992b97507a907adba47af46c6e0ea436da203d0740260e9e1052d3e324d436b07d8d2634b8eae9e0dbb4715759daeebad413779255b8b9340284e7e617d362ab28ef6d763a1599e08344396c0defa9ced76dae6b5ef6b971f8c1dd7ccc4ac7b686c3b277205936aa4b7977c7f1bbb872efb1e5b88ec788002ad522350108785d482da8a2dc195a7a98ab769153f776f6c4ae11fbffaaac6056c1e67f9e91724054fb9e0d1b333726769be7bb1197e98d3ed0f7d570060bf07143a5441d03cc0de82f878838497da2b9164f98a2686e399755b2a34255def3a714d9ba3c36b758396059cfb16c13532650ecf15766f9ec02e353adb53337473b89deba9dea10033003f4e176fa592cc4a3969ea0dbdff05d4cbb91ce89f6a3e7a98f47003e89d00748bd3cbdc9ce631d523bad989ce625de69061ef6135f450a7c7ad0c7f155c82f51d9e528a3d99993482661ced2862f37e53f857bb00a77c0875fc1c39b729023b61c26d898f25916c1d1361295eb1e7e40e8ce02d73bcffb5a0583a65e4f94f613086b857d32956ea5196fc5d7f9548d8fcd82266011d83c4a94265064b64632e255289a900be00fe1cf5991d2a07efa47770b7642c5e7bc30d1927d4cf64a15e595cedd9a8a073638dfa540c6cce69f60e0ad1d780b36129aa078ea71fb7e137a60224e6abcacd8f72c98954ba99a7624de4276c47f11d959b78bb591be7008165fb4b53b21f087f24688e7ab891a9d9f94300e2a7b523450d8501b8c07ebf0f8594a492f19e397f568e26c0a50bdf7441375ed2b52a41ce05f6e4f3d094fd815740c5c3e87f982aff756e440489e4385e1145767d7d2f0fbe1b45cdcc547a99e664a66a815033962eb98de68105d35271ec7799cd731f188e1671035721b43a159735a9fac59d924e69b67b775f36c51e14002395457a5c2","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a09028e0b5c4edeccd717718505802d5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
